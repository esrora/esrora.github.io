{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Servicios en Red","text":"<p>Bienvenidos a la asignatura de Servicios en Red, esta asignatura se imparte en el 2\u00ba curso del ciclo formativo de grado medio de Sistemas Microinform\u00e1ticos y Redes</p> <p>A lo largo de este m\u00f3dulo vamos a ver diferentes servicios que se pueden ofrecer en una red</p> <ul> <li>Servidor DNS</li> <li>Servidor DHCP</li> <li>Servidor SSH</li> <li>Servidor HTTP</li> <li>Servidor FTP</li> <li>Servidor de Correo Electr\u00f3nico.</li> <li>Servicio de VoIP</li> </ul>"},{"location":"about/","title":"Sobre m\u00ed","text":"<p>Mi nombre es Esteban Rodr\u00edguez y soy profesor de ciclos formativos en el instituto E.F.A. El Campico</p>"},{"location":"tema61/","title":"Introducci\u00f3n","text":"<p>Es un servicio que usa un protocolo con el mismo nombre, FTP, File Transfer Protocol, protocolo de transferencia de fichero.</p> <p>Permite transferir ficheros de forma entre servidor y cliente.</p> <p>Los puertos que usa por defecto son el 20, 21, 22, 69 y mayores del 1024, todos seg\u00fan el tipo FTP, FTPS, SFTP o TFTP.</p>"},{"location":"tema61/#tftp","title":"TFTP","text":"<p>Trivial File Transfer Protocol es el m\u00e1s simple de todos - Usa el protocolo UDP, puerto 69. - No usa autenticaci\u00f3n, ni cifrado - No permite listar contenido de los directorios</p> <p>Es decir, un servidor abre su puerto 69 por UDP y el cliente solicita un fichero al servidor por ese puerto sin necesidad de usuario y contrase\u00f1a.</p>"},{"location":"tema61/#sftp","title":"SFTP","text":"<p>SSH File Transfer Protocol este servicio va ligado al servidor SSH visto en temas anteriores, usa toda la seguridad que ofrece el servicio SSH para la transferencia segura de ficheros entre servidor y cliente.</p> <p>Usa el protocolo TCP y el puerto 22 al igual que el servicio SSH, las formas de acceso son las mismas que el servicio SSH.</p>"},{"location":"tema61/#ftps","title":"FTPS","text":"<p>Este caso es la uni\u00f3n entre el protocolo FTP y SSL/TLS, algov parecido a lo que ocurr\u00eda en el tema anterior con HTTPS.</p> <p>Usa el puerto 21 y el protocolo TCP para comenzar la comunicaci\u00f3n sin protecci\u00f3n ninguna (igual que el FTP tradicional) y a partir de ah\u00ed pide que se use TLS para el resto de la comunicaci\u00f3n.</p> <p>Es decir, igual que el FTP en todo excepto en la transferencia de informaci\u00f3n que ser\u00e1 cifrada.</p>"},{"location":"tema61/#ftp-y-sus-caracteristicas","title":"FTP y sus caracter\u00edsticas","text":"<p>Este es el servicio b\u00e1sico en el que nos vamos a centrar por su popularidad, sobretodo en la WWW. Su uso fundamental es la transferencia de los sitios web desde la m\u00e1quina del desarrollador al servidor web o HTTP.</p> <ul> <li>Usa el puerto 20, 21 y los mayores al 1024 por TCP.</li> <li>Transferencia de datos r\u00e1pida.</li> <li>Multiplataforma, independiente de S.O. o sistema de ficheros.</li> <li>Poco seguro, ya que todo se transfiere sin cifrar.</li> </ul>"},{"location":"tema62/","title":"Modos de conexi\u00f3n.","text":"<p>Se usa dos canales de comunicaci\u00f3n entre el cliente y el servidor.</p> <p>El primero o canal de control se usar\u00e1 para establecer la comunicaci\u00f3n y el intercambio de comandos y permanecer\u00e1 activo durante todo el tiempo que dure la comunicaci\u00f3n.</p> <p>El segundo o canal de datos se usar\u00e1 para el intercambio de ficheros y existe dos formas de crear este canal dependiente de quien crea la conexi\u00f3n: modo activo y modo pasivo.</p>"},{"location":"tema62/#modo-activo","title":"Modo activo","text":"<p>El cliente env\u00eda una petici\u00f3n desde cualquier puerto mayor al 1024 (Ej:1051) al 21 del servidor. Este mensaje contiene el puerto que va a usar el cliente para el canal de datos (Ej: 1052).</p> <p>El servidor responde con un mensaje de aceptaci\u00f3n ACK.</p> <p>El servidor inicia la conexi\u00f3n del canal de datos desde su puerto 20 al puerto que indic\u00f3 el cliente mayor a 1024 (Ej: 1052) </p> <p>El cliente responde con un mensaje de confirmaci\u00f3n ACK.</p> <p></p>"},{"location":"tema62/#modo-pasivo","title":"Modo pasivo","text":"<p>El cliente env\u00eda una petici\u00f3n desde cualquier puerto mayor al 1024 (Ej: 1051) al 21 del servidor. Indica qu\u00e9 va a usar el modo pasivo.</p> <p>El servidor responde con un mensaje incluyendo el puerto al que el cliente debe dirigirse para crear la conexi\u00f3n de datos (Ej: 2000).</p> <p>El cliente inicia la conexi\u00f3n del canal de datos desde un puerto mayor al 1024 (Ej: 1052) al puerto que indic\u00f3 el servidor (Ej: 2000) </p> <p>El servidor responde con un mensaje de confirmaci\u00f3n ACK.</p> <p></p>"},{"location":"tema62/#activo-vs-pasivo","title":"Activo vs Pasivo","text":"<p>La diferencia principal entre los dos modos de conexi\u00f3n es que en el modo activo es el servidor el que inicia la conexi\u00f3n del canal de datos y en el modo pasivo es el cliente el que inicia la conexi\u00f3n del canal de datos.</p> <p>En el modo activo el cliente debe aceptar conexiones TCP entrantes, si el cliente est\u00e1 detr\u00e1s de un cortafuegos lo normal es que este bloquee cualquier conexi\u00f3n entrante para evitar riesgos de seguridad. Esto no ocurre en el modo pasivo.</p>"},{"location":"tema63/","title":"Parte 3 Comandos y Usuarios","text":""},{"location":"tema63/#comandos","title":"Comandos","text":"ORDEN DESCRIPCI\u00d3N EJEMPLO open Abre conexi\u00f3n open 192.168.0.1 dir, ls Mostrar contenido del directorio ls cd Cambiar de directorio cd Escritorio get Descargar fichero get index.html put Subir fichero put index.html close Cierra la conexi\u00f3n close quit Cierra la conexi\u00f3n y el programa quit"},{"location":"tema63/#tipos-de-usuarios","title":"Tipos de usuarios","text":"<p>Para acceder al servidor FTP tenemos 3 tipos de usuarios, que no tiene porqu\u00e9 estar activados de forma simult\u00e1nea en el servidor.</p> <ul> <li>An\u00f3nimo: Este usuario (anonymous) donde la contrase\u00f1a es un correo electr\u00f3nico permite acceder al servidor FTP a una carpeta en forma de s\u00f3lo lectura. Se suele usar para compartir ciertos documentos, software, \u2026 con todos los clientes, por ejemplo, las distribuciones Linux. FTP de Rediris</li> <li>Local: Estos son los usuarios del servidor, es decir, son usuarios que est\u00e1n dados de alta en el servidor donde tenemos instalado el servicio FTP. Son usuarios que tienen su carpeta local en el servidor y pueden acceder al servicio FTP con el mismo usuario y contrase\u00f1a que usan para entrar al servidor.</li> <li>Virtual: Estos usuarios s\u00f3lo existen dentro del servidor FTP y el usuario y contrase\u00f1a proporcionado s\u00f3lo se puede usar para acceder al FTP.</li> </ul>"},{"location":"tema63/#clientes-ftp","title":"Clientes FTP","text":"<p>Existen diferentes formas de acceder al servicio FTP, mediante la consola o terminal</p> <p></p> <p>Existen clientes gr\u00e1\ufb01cos que facilitan la conexi\u00f3n y el intercambio de \ufb01cheros.</p> <p></p>"},{"location":"tema64/","title":"Parte 4 Pr\u00e1ctica","text":""},{"location":"tema64/#instalacion","title":"Instalaci\u00f3n","text":"<p>Primeramente, actualizaremos los repositorios del sistema con el comando:</p> <pre><code>sudo apt update\n</code></pre> <p>Ahora actualizamos los paquetes con:</p> <pre><code>sudo apt upgrade\n</code></pre> <p>Despu\u00e9s de actualizar, utilizamos el siguiente comando para instalar el servicio Pure-FTP.</p> <pre><code>sudo apt install pure-ftpd\n</code></pre>"},{"location":"tema64/#usuario-anonimo","title":"Usuario an\u00f3nimo","text":"<p>Para a\u00f1adir un usuario an\u00f3nimo, utilizamos el siguiente comando:</p> <p>sudo adduser ftp --shell /sbin/nologin --home /var/ftp</p> <p>Para permitir el inicio de sesi\u00f3n de usuarios an\u00f3nimos, hay que cambiar una directiva que se encuentra en el directorio /etc/pure-ftpd/conf/.</p> <p>Tenemos las siguientes directivas:</p> <p>La directiva a cambiar es NoAnonymous. Para ello usamos el siguiente comando:</p> <pre><code>sudo nano /etc/pure-ftpd/conf/NoAnoymous\n</code></pre> <p>Seguidamente, establecemos su valor en no.</p> <p>Despu\u00e9s, creamos la directiva AnonymousCantUpload para que los usuarios an\u00f3nimos no puedan escribir, pero s\u00ed leer. Para ello, usamos el siguiente comando:</p> <pre><code>sudo nano /etc/pure-ftpd/conf/AnonymousCantUpload\n</code></pre> <p>Y establecemos su valor en yes.</p> <p>Por \u00faltimo, reiniciamos el servicio con el siguiente comando:</p> <p>Para aplicar los cambios reiniciamos el servicio</p> <p>sudo systemctl restart pure-ftpd</p>"},{"location":"tema64/#usuarios-locales","title":"Usuarios locales","text":"<p>Para permitir el inicio de sesi\u00f3n de los usuarios locales, abrimos la directiva PAMAuthentication con el siguiente comando:</p> <pre><code>sudo nano /etc/pure-ftpd/conf/PAMAuthentication\n</code></pre> <p>Seguidamente, establecemos su valor en yes.</p> <p>Despu\u00e9s, reiniciamos el servicio con el siguiente comando:</p> <p>Para aplicar los cambios reiniciamos el servicio</p> <p>sudo systemctl restart pure-ftpd</p>"},{"location":"tema64/#usuarios-virtuales","title":"Usuarios virtuales","text":"<p>Para crear usuarios virtuales, necesitamos un usuario local que haga de intermediario entre el sistema y los usuarios virtuales. Para ello, a\u00f1adimos un grupo de usuarios y lo nombramos, por ejemplo, virtualesftp. Usaremos el siguiente comando:</p> <pre><code>sudo groupadd virtualesftp\n</code></pre> <p>Seguidamente a\u00f1adimos el usuario, al que vamos a nombrar virtualftp, con el siguiente comando:</p> <pre><code>sudo useradd -g virtualesftp -d /dev/null -s /sbin/nologin virtualftp\n</code></pre> <p>Ahora, crearemos el directorio del usuario virtual con el siguiente comando:</p> <pre><code>sudo mkdir /home/virtualesftp\nsudo mkdir /home/virtualesftp/esteban\n</code></pre> <p>Despu\u00e9s, creamos el usuario virtual con el siguiente comando:</p> <pre><code>sudo pure-pw useradd esteban -u virtualftp -d /home/virtualesftp/esteban\n</code></pre> <p>Seguidamente, generamos la base de datos de Pure con el siguiente comando:</p> <pre><code>sudo pure-pw mkdb\n</code></pre> <p>Creamos los accesos directos a los ficheros generados con los siguientes comandos:</p> <pre><code>sudo ln -s /etc/pure-ftpd/pureftpd.passwd /etc/pureftpd.passwd\nsudo ln -s /etc/pure-ftpd/pureftpd.pdb /etc/pureftpd.pdb\nsudo ln -s /etc/pure-fptd/conf/PureDB /etc/pure-ftpd/auth/PureDB\n</code></pre> <p>Por \u00faltimo, cambiamos el propietario de los directorios de los usuarios virtuales y reiniciamos el servicio con los siguientes comandos:</p> <pre><code>sudo chown -hR virtualftp:virtualesftp /home/virtualesftp/\n</code></pre> <p>Para aplicar los cambios reiniciamos el servicio</p> <p>sudo systemctl restart pure-ftpd</p>"},{"location":"tema64/#mensajes","title":"Mensajes","text":"<p>Si se desea crear un mensaje personalizado para cada usuario, crearemos el fichero .banner dentro de su directorio por defecto. En este fichero escribimos el mensaje que desea mostrar. Por ejemplo, si deseamos crear un mensaje para el usuario local pedro, usamos el siguiente comando:</p> <pre><code>sudo nano /home/pedro/.banner\n</code></pre> <p>Dentro de este fichero, escribiremos, por ejemplo: Bienvenido al servidor FTP, Pedro.</p>"}]}